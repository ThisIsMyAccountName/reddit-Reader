{% extends "base.html" %}

{% block title %}Settings - Reddit Reader{% endblock %}

{% block content %}
<div class="settings-container">
    <h1>‚öôÔ∏è Settings</h1>
    
    <div class="settings-section">
        <h2>üìå Pinned Subreddits</h2>
        <p class="form-help">Your favorite subreddits appear in the header for quick access (first 5 shown).</p>
        
        <form method="post" class="add-sub-form">
            <input type="hidden" name="action" value="add">
            <input type="text" 
                   name="sub" 
                   class="form-input" 
                   placeholder="Enter subreddit name (e.g., python)"
                   autocomplete="off">
            <button type="submit" class="btn btn-primary">Add</button>
        </form>
        
        {% if pinned_subs %}
        <div class="pinned-list">
            {% for sub in pinned_subs %}
            <div class="pinned-item" data-sub="{{ sub }}">
                <div class="pinned-item-reorder">
                    {% if not loop.first %}
                    <form method="post" class="reorder-form">
                        <input type="hidden" name="action" value="move_up">
                        <input type="hidden" name="sub" value="{{ sub }}">
                        <button type="submit" class="btn btn-small btn-reorder" title="Move up">‚Üë</button>
                    </form>
                    {% else %}
                    <span class="btn btn-small btn-reorder btn-disabled">‚Üë</span>
                    {% endif %}
                    {% if not loop.last %}
                    <form method="post" class="reorder-form">
                        <input type="hidden" name="action" value="move_down">
                        <input type="hidden" name="sub" value="{{ sub }}">
                        <button type="submit" class="btn btn-small btn-reorder" title="Move down">‚Üì</button>
                    </form>
                    {% else %}
                    <span class="btn btn-small btn-reorder btn-disabled">‚Üì</span>
                    {% endif %}
                </div>
                <a href="{{ url_for('subreddit', name=sub) }}" class="pinned-item-name">r/{{ sub }}</a>
                {% if loop.index <= 5 %}<span class="pinned-badge">visible</span>{% endif %}
                <form method="post" class="pinned-item-remove">
                    <input type="hidden" name="action" value="remove">
                    <input type="hidden" name="sub" value="{{ sub }}">
                    <button type="submit" class="btn btn-small btn-danger" title="Remove">‚úï</button>
                </form>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="text-secondary" style="margin-top: 15px;">No pinned subreddits yet. Add some above!</p>
        {% endif %}
    </div>
    
    <div class="settings-section">
        <h2>Quick Add</h2>
        <p class="form-help">Click to add popular subreddits:</p>
        <div class="quick-add-subs">
            {% for sub in ['all', 'popular', 'news', 'gaming', 'pics', 'videos', 'funny', 'askreddit', 'worldnews', 'technology', 'science', 'programming'] %}
            <form method="post" style="display: inline;">
                <input type="hidden" name="action" value="add">
                <input type="hidden" name="sub" value="{{ sub }}">
                <button type="submit" class="btn btn-small {% if sub in pinned_subs %}btn-disabled{% endif %}" {% if sub in pinned_subs %}disabled{% endif %}>{{ sub }}</button>
            </form>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
